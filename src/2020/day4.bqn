# data â† â€¢file.Lines "../../samples/2020/day4.txt"
data â† â€¢file.Lines "../../inputs/2020/day4.txt"

# numbers â† â€¢ParseFloatÂ¨ data

# byr (Birth Year)
# iyr (Issue Year)
# eyr (Expiration Year)
# hgt (Height)
# hcl (Hair Color)
# ecl (Eye Color)
# pid (Passport ID)
# cid (Country ID)

field_names â† âŸ¨"byr", "iyr", "eyr", "hgt", "hcl", "ecl", "pid", "cid"âŸ©
fields_no_cid â† ((Â¬"cid"âŠ¸â‰¡)Â¨/âŠ¢)field_names

SplitBy â† (+`âˆ˜=âŠ”âŠ¢)
# â€¢Show data
# â€¢Show "lengths"â€¿(â‰ Â¨ data)
mask â† Â¬ 0= â‰ Â¨ data

mask
grouped_idxs â† 0 ((+`âˆ˜=){ ğ•¨âŠ”â†•â‰ ğ•© }âŠ¢) Â¬ 0= â‰ Â¨ data
grouped_data â† {ğ•©âŠdata}Ë˜Â¨ grouped_idxs
# â€¢Show "grouped_data"â€¿grouped_data


RemoveSpaceOnlyLists â† (âˆ¨`' 'âŠ¸â‰ )âŠ¸/
RemoveSpaces â† (' 'âŠ¸â‰ )âŠ¸/

# takes a list of strings and returns a single group of strings without spaces
GatherPassports â† {
	JoinWithSpace â† {ğ•¨âˆ¾ " "âˆ¾ğ•©}Â´
	Foo â† RemoveSpaceOnlyLists JoinWithSpace
	RemoveSpacesÂ¨ ' 'SplitBy Foo ğ•©
}
raw_passports â† GatherPassportsÂ¨ grouped_data
â€¢Show "---"

raw_parsed_passports â† (( ':'âŠ¸SplitByÂ¨ ' 'âŠ¸SplitBy)Â¨)Â¨ raw_passports
PerRawPassport â† {
	PerPair â† {
		keyâ€¿value â† ğ•©
		# â€¢Show keyâ€¿(':'âŠ¸â‰ âŠ¸/value)
		key
	}
	PerEntryGroup â† {
		PerPairÂ¨ ğ•©
	}
	sorted_keys â† âˆ¨ âˆ¾Â´ PerEntryGroupÂ¨ ğ•©

	(âˆ¨fields_no_cid) â‰¡ ((Â¬"cid"âŠ¸â‰¡)Â¨/âŠ¢)sorted_keys
}
â€¢Show +Â´ PerRawPassportÂ¨ raw_parsed_passports
# â€¢Show  âŠ£ËœâŠ¸/Â¨ 1/Â¨ 0 SplitBy Â¬0=â‰ Â¨ data

IsValidByrNum â† 1920âŠ¸â‰¤âˆ§â‰¤âŸœ2002
IsValidByrLen â† 4âŠ¸=â‰ 
IsValidByr â† {
	correct_len â† 4=â‰ ğ•©
	correct_len âˆ§ IsValidByrNum (â€¢ParseFloatâŠ(-2Ë™)) ğ•©
}

byr_asserts â† {
	"expected BYR 1919 is wrong" !Â¬ IsValidByr "1919"
	"expected BYR 1920 is valid" !  IsValidByr "1920"
	"expected BYR 1921 is valid" !  IsValidByr "1921"

	"expected BYR 2002 is valid" !  IsValidByr "2002"
	"expected BYR 2003 is wrong" !Â¬ IsValidByr "2003"
}


# â€¢Show data

