data â† â€¢file.Lines "../../samples/2020/day8.txt"
# data â†© â€¢file.Lines "../../samples/2020/day8_alt.txt"
# data â†© â€¢file.Lines "../../inputs/2020/day8.txt"

Log â† {
	msgâ€¿val â† ğ•©
	â€¢Show msgâ€¿val
	val
}


SplitBy â† (+`âˆ˜=âŠ”âŠ¢)

Parse â† {
	"nop"â€¿val: 1â€¿0;
	"acc"â€¿val: 1â€¿val;
	"jmp"â€¿val: valâ€¿0
}

PartOne â† {
	acc â† 0
	idx â† 0
	all_idxs â† âŸ¨âŸ©
	insts â† {â€¢ParseFloatâŒ¾(1âŠ¸âŠ‘) (('+'âŠ¸â‰ /âŠ¢)' 'âŠ¸â‰ /âŠ¢)Â¨ ' 'SplitBy ğ•©}Â¨ ğ•©
	â€¢Show  âˆ˜â€¿1â¥Š insts

	i â† 0

	{ ğ•©
		offsetâ€¿to_add â† Parse idxâŠ‘ insts
		# â€¢Show "acc"â€¿acc
		Log "offset, to add"â€¿(offsetâ€¿(to_add))
	}â€¢_while_{ğ•Šoffsetâ€¿to_add:

		i â†© i+1

		# â€¢Show idxâ€¿acc
		# â€¢Delay 0.25

		exists â† 1= ( +Â´ â¥Š (idx+offset)âˆŠall_idxs)
		{ ((i> 1_000_000) âˆ¨ exists) ?
			0 ;

			idx â†© (idx+offset)
			acc â†© acc+to_add
			all_idxs â†© all_idxsâˆ¾ idx
			1
		}
	} 1â€¿0
	acc
}

PartTwo â† {
	ğ•©
}


â€¢Show "part1"â€¿(PartOne data)
# PartTwo data

â€¢Show "done"
