data â† â€¢file.Lines "../../samples/2020/day8.txt"
# data â†© â€¢file.Lines "../../samples/2020/day8_alt.txt"
data â†© â€¢file.Lines "../../inputs/2020/day8.txt"

Log â† {
	msgâ€¿val â† ğ•©
	â€¢Show msgâ€¿val
	val
}


SplitBy â† (+`âˆ˜=âŠ”âŠ¢)

Parse â† {
	"nop"â€¿val: 1â€¿0;
	"acc"â€¿val: 1â€¿val;
	"jmp"â€¿val: valâ€¿0
}

limit â† 1_000_000

PartOne â† {
	acc â† 0
	idx â† 0
	all_idxs â† âŸ¨âŸ©
	insts â† {â€¢ParseFloatâŒ¾(1âŠ¸âŠ‘) (('+'âŠ¸â‰ /âŠ¢)' 'âŠ¸â‰ /âŠ¢)Â¨ ' 'SplitBy ğ•©}Â¨ ğ•©
	âˆ˜â€¿1â¥Š insts

	iterations â† 0

	{ ğ•©
		inst â† idxâŠ‘ insts
		offsetâ€¿to_add â† Parse inst
		# â€¢Show "acc"â€¿acc
		# Log "offset, to add"â€¿(offsetâ€¿(to_add))
		(offsetâ€¿(to_add))
	}â€¢_while_{ğ•Šoffsetâ€¿to_add:

		iterations â†© iterations+1

		new_idx â† idx+offset

		# â€¢Delay 0.25


		already_processed â† 1= ( +Â´ â¥Š new_idxâˆŠall_idxs)
		{ ((iterations> limit) âˆ¨ already_processed) ?
			0 ;

			idx â†© new_idx
			acc â†© acc+to_add
			all_idxs â†© all_idxsâˆ¾ idx
			1
		}
	} Parse âŠ‘ insts
	acc
}

PartTwo â† {
	ğ•©
}


â€¢Show "part1"â€¿(PartOne data)
# PartTwo data

â€¢Show "done"
