data â† â€¢file.Lines "../../samples/2024/day6.txt"
# data â†© â€¢file.Lines "../../samples/2024/day6_alt.txt"
# data â†© â€¢file.Lines "../../inputs/2024/day6.txt"


Log â† {msgğ•Šval:
	â€¢Show msgâ€¿val
	val
}


chars â† "^>v<"
RotateGuard â† {ğ•Šchar:
	new_char â† ((â‰ chars)|1+Ëœ/charâ·chars)âŠchars
	âŠ‘new_char
}
Turn90 â† âŒ½Ë˜1âŠ¸â‰

IdxToRowCol â† {boardğ•Šidx:
	rowsâ€¿cols â† â‰¢ board
	row â† 1+cols|idx
	col â† idx - row Ã— rows
	rowâ€¿col
}

PartOne â† {ğ•Šlines:

	char â† '>'
	# â€¢Show RotateGuard char

	# "lines"âŠ¸LogÂ¨ lines

	input â† 5â€¿5â¥Š @+97 + â†•26
	input â†© >Ë˜ lines
	"orig input" Log input
	joinedâ† ((â†•â‰ ){yğ•Šline: ((â†•â‰ line)â‹ˆÂ¨Ëœy)â‹ˆÂ¨line }Ë˜âŠ¢)input
	# "joined coords"âŠ¸Log 0âŠ‘Â¨ Turn90 joined
	# "joined char"âŠ¸Log 1âŠ‘Â¨ Turn90 joined
	first_rowâ€¿first_col â† ((âŠ‘Â·/ â‰ Â¨)â‹ˆ(âŠ‘âˆ˜(â‰ Â¨âˆ¾âˆ˜/âŠ¢)))  <âˆ˜/Ë˜ {âŒˆÂ´âˆ¾Ë˜charsâŠ¸âˆŠâ‹ˆ 1âŠ‘ğ•©}Â¨ joined
	"first row,col" Log first_rowâ€¿first_col
	# â€¢Exit 0

	# in: (board, prev input) out: (rotated board, next input)
	Iter â† {obj_rowâ€¿obj_colğ•Šprev_board:
		input â†© Turn90 prev_board

		obj â† obj_rowâ€¿obj_col
		"obj"âŠ¸Log obj

		# "input coords"âŠ¸Log 0âŠ‘Â¨ input
		"rotated (unchanged guard)"âŠ¸Log 1âŠ‘Â¨ input

		"elm_idx" Log elm_idx â† âŠ‘(/(objâŠ¸â‰¡)âˆ˜âŠ‘Â¨) â¥Š input
		"row,col" Log rowâ€¿col â† input IdxToRowCol elm_idx
		"rotated row,col" Log rowâ€¿col
		"grabbed" Log grabbed â† rowâ€¿colâŠ‘input
		rotated â† RotateGuardâŒ¾(1âŠ¸âŠ‘âˆ˜(rowâ€¿colâŠ¸âŠ‘)) input
		"rotated" Log 1âŠ‘Â¨ rotated
		row_pairs â† rowâŠrotated
		"row_chars" Log row_charsâ†1âŠ‘Â¨ row_pairs

		!'>'=char #sanity check
		char_idx â† âŠ‘ /char=row_chars
		hash_idxs â†  >/'#'=row_chars

		next_hash_idx â† âŠ‘((char_idxâŠ¸<)Â¨/âŠ¢) hash_idxs
		range â† (char_idx+â†• next_hash_idx-char_idx)âŠrow_pairs

		"next_obj" Log next_obj â† âŠ‘ (rowâ€¿(1-Ëœnext_hash_idx))âŠ‘input

		next_objâ€¿input
	}

	(first_rowâ€¿first_col)Iter joined

	âˆ
}

PartTwo â† {ğ•Šlines:
	lines
}

SolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is wrong! Got instead: "âˆ¾(â€¢Fmt answer))
	err_msg!(expected= answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

"part 1: " Log PartOne data
# "part 2: " Log PartTwo data
# 1â€¿5329 SolutionValidator PartOne data
# 2â€¿5833 SolutionValidator PartTwo data

