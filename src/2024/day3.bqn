data â† â€¢file.Lines "../../samples/2024/day3.txt"
# data â†© â€¢file.Lines "../../samples/2024/day3_alt.txt"
data â†© â€¢file.Lines "../../inputs/2024/day3.txt"


Log â† {msgğ•Šval:
	â€¢Show msgâ€¿val
	val
}

verbose â† 0
CLog â† {msgğ•Šval:
	{verbose ? â€¢Show msgâ€¿val ; @}
	val
}


mul â† "mul(" #1
digits â† @+48 + â†•10 #2
com â† ',' #3
end â† ')' #4

allowed_chars â† mulâˆ¾",)"âˆ¾digits

# â€¢Show [1,2,3,2,4]
# â€¢Show [1,2,2, 2,3,2,2,2,4]


Find â† {charsğ•Šinput:
	charsâ·input âˆ¾ (0Ë˜ (â†• -âŸœ1âˆ˜â‰ )chars)

}

bad â† "mul(3,4]   )"
PartOne â† {ğ•Šlines:
		PerLine â† {ğ•Šline: 
			# line â† "xmul(2000,4)%&mul[3,7]!@^do_not_mul(5,5)+mul(32,64]then(mul(11,8)mul(8,500))"
			"line" Log line 100âŠ¸â†‘â†©
			paddings â† ( (+âŸœ(â†•4))Ë˜ / mul Find line)
			mul_match â† mul Find line
			mul_mask â†   âŒˆË { "mul(" Find line}Ë˜ paddings
			mul_part â† mul_mask+`âŠ¸âŠ”line
			end_mask â† (/ ")"âŠ¸Find)Â¨ mul_mask+`âŠ¸âŠ”line
			idk â† (((0â‰ â‰ Â¨)âŠ‘Â¨âˆ˜/âŠ¢) end_mask)
			lengths â† (((0â‰ â‰ Â¨) end_mask )/ mul_part)
			"grabbed" Log grabbed â†  ((âŒŠÂ´ allowed_charsâŠ¸(âˆŠËœ))Â¨/âŠ¢) (idk 4âŠ¸â†“âˆ˜â†‘Â¨ lengths)
			splitcomma â† ','(((âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=)âŠ”âŠ¢)Â¨ grabbed
			"parsed" Log parsed â† (â€¢ParseFloatÂ¨ )Â¨ splitcomma
			Range â† (1âŠ¸â‰¤âˆ§1000âŠ¸>)
			"Valids mask" Log valids_mask â† (âŒŠÂ´ RangeÂ¨)Â¨ parsed
			"Valid" Log valids â† valids_mask/ parsed
			"mul res" Log mul_res â† Ã—Â´Â¨ valids
			res â† +Â´ mul_res

			res
		}

		# +Â´ PerLine âŠ‘lines
		+Â´ PerLineÂ¨ lines
}

PartTwo â† {ğ•Šlines:
 â‰ lines
}

# # input â† [1,1,1,1,2,4,1,1,1,1, 9, 100, 4]
# # "input" Log input
# "input" Log âŠ‘data
#
# input â† ( âŠ‘data)
# mulres â† "mul(" Find input
#
# "mulres" Log mulres
# "group " Log mulres+`âŠ¸âŠ”input
# # "input" Log âŒˆË â·âŸœ(20â†‘ âŠ‘data)Ë˜ "mul(,)"âˆ¾digits

"part 1: " Log PartOne data

# "Part 1 is wrong!"!472= "part 1: " Log PartOne data
# "Part 2 is wrong!"!520= "part 2: " Log PartTwo data
