data â† â€¢file.Lines "../../samples/2024/day7.txt"
# data â†© â€¢file.Lines "../../samples/2024/day7_alt.txt"
# data â†© â€¢file.Lines "../../inputs/2024/day7.txt"


# dyadic show but returns paired args
DShow â† {â€¢Show ğ•¨â€¿ğ•©â‹„ ğ•©}

Log â† {msgğ•Šval:
	â€¢Show (<msg)âˆ¾val
	val
}
RLog â† {msgğ•Šval:
	â€¢Show (msg)â‹ˆval
	val
}

Id â† âŠ¢

PartOne â† {ğ•Šlines:
	Parse â† {ğ•Šline:
		raw_targetâ€¿raw_parts â† (+`':'âŠ¸=Â¨)âŠ¸âŠ”line
		target â† â€¢ParseFloat raw_target
		parts â† â€¢ParseFloatâˆ˜(1âŠ¸â†“)Â¨ 1â†“ (+`' 'âŠ¸=Â¨)âŠ¸âŠ”  1â†“raw_parts

		targetâ€¿parts
	}

	parsed â† ParseÂ¨ lines
	IsCalibrated â† {ğ•Štargetâ€¿parts:
		all_ops â† â¥Š (+â€¿Ã—)âˆ¾âŒœâŸ(2-Ëœâ‰ parts) (+â€¿Ã—)
		"parsed"âŠ¸LogÂ¨ targetâ€¿parts
		# ops_grid â† â¥Šâ‹ˆâŒœËœops
		# "ops_grid"âŠ¸Log ops_grid
		"all_ops"âŠ¸Log all_ops

		ApplyAllFuncs â† {ğ•Šfuncs:
			â€¢Out "--- Foo "âˆ¾50/"-"
			# "type funcs" Log â€¢Type funcs
			# "dims/rank funcs " RLog =funcs
			# "funcs" Log funcs
			# "type funcs" RLog =funcs

			Apply â† {liâ€¿lvğ•Šriâ€¿rv:
				op â† riâŠ‘ â¥Š>funcs
				"op" RLog op
				res â† lv Op rv
				"res"âŠ¸RLog res
				liâ€¿res
			}

			final_idxâ€¿total â† ApplyÂ´ âŒ½ â†•âˆ˜â‰ âŠ¸(â‹ˆÂ¨)parts
			"total"âŠ¸Log total

			# "res" Log â€¢Bqn â€¢Fmt âŒ½ âˆ¾ funcsâ‰ËœÂ¨ parts

		}

		totals â† ApplyAllFuncsË˜ all_ops
		â€¢Show totals
		is_valid â† âŒˆÂ´ target=totals
	}
	# IsCalibrated entry â† 1âŠ‘ parsed
	+Â´âŠ‘Â¨âˆ˜((IsCalibratedÂ¨)âŠ¸/) parsed
	# RunÂ¨ parsed



	# â€¢Show ({ğ•Šlâ€¿r:
	# 	# "l, r" Log lâ€¿r
	# 	{l ğ• r}Â¨ ops
	# })Ë˜ windowed â† 2â†•parts
}

PartTwo â† {ğ•Šlines:
	âˆ
}

SolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is wrong! Got instead: "âˆ¾(â€¢Fmt answer))
	err_msg!(expected= answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

AtLeastPartialSolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is too low! Got instead: "âˆ¾(â€¢Fmt answer))
	â€¢Show expectedâ€¿answer
	"expected is < answer" Log expected<answer
	err_msg!(expected< answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

AtMostPartialSolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is too hight! Got instead: "âˆ¾(â€¢Fmt answer))
	â€¢Show expectedâ€¿answer
	"expected is > answer" Log expected>answer
	err_msg!(expected< answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

# "part 1: " Log PartOne data
# "part 2: " Log PartTwo data
1â€¿3749 SolutionValidator PartOne data
# 2â€¿??? SolutionValidator PartTwo data
