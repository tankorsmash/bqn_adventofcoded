data â† â€¢file.Lines "../../samples/2024/day8.txt"
# data â†© â€¢file.Lines "../../samples/2024/day8_alt.txt"
data â†© â€¢file.Lines "../../inputs/2024/day8.txt"

# dyadic show but returns paired args
DShow â† {â€¢Show ğ•¨â€¿ğ•©â‹„ ğ•©}

Log â† {msgğ•Šval:
	â€¢Show (<msg)âˆ¾val
	val
}
RLog â† {msgğ•Šval:
	â€¢Show (msg)â‹ˆval
	val
}

IdxToRowCol â† {boardğ•Šidx:
	rowsâ€¿cols â† â‰¢ board
	row â† âŒŠ idxÃ·rows
	col â† rows|idx
	rowâ€¿col
}

PartOne â† {ğ•Šlines:
	freqs â† '.'âŠ¸â‰ âŠ¸/â·âˆ¾lines

	antennae â† / '.'âŠ¸â‰ âˆ¾lines
	ant_coords â† (>lines)âŠ¸IdxToRowColÂ¨ antennae

	FindAnts â† {ğ•Šchar:
		char_idxs â† /âˆ˜(charâŠ¸=) âˆ¾lines
		coords â† (>lines)âŠ¸IdxToRowColÂ¨ char_idxs
		rowsâ€¿cols â† shape â†â‰¢>Ë˜lines

		raw_pairs â†  â‰âŒœËœ coords
		# â€¢Out 50/"-"

		# nonempty pairs of coords
		pairs â† (0âŠ¸â‰ â‰ Â¨)âŠ¸/Ë˜ (â‰¢ËÂ¨)âŠ¸(/Â¨) raw_pairs
		((-Ë)+âŠ) pair â† âŠ‘ pairs
		all_antinodes â† ((-Ë)+âŠ)Â¨ pairs
		WithinBounds â† {ğ•Šantinode:
			maxes â† â‰¤Ë >shapeâ‹ˆ   antinode
			mins â† >Ë >(0â€¿0)â‹ˆ   antinode

			Â¬ âŒˆÂ´ (maxes)âˆ¾(mins)
		}
		bounded â† (WithinBoundsÂ¨)âŠ¸/ â¥Šall_antinodes
		# no_collision â† (ant_coordsâŠ¸(Â¬âˆ˜âˆŠËœ))âŠ¸/ bounded
		bounded
	}

	â‰  â·âˆ¾ FindAntsÂ¨ freqs
}

PartTwo â† {ğ•Šlines:
	freqs â† '.'âŠ¸â‰ âŠ¸/â·âˆ¾lines

	FindAnts â† {ğ•Šchar:
		char_idxs â† /âˆ˜(charâŠ¸=) âˆ¾lines
		coords â† (>lines)âŠ¸IdxToRowColÂ¨ char_idxs
		rowsâ€¿cols â† shape â†â‰¢>Ë˜lines

		raw_pairs â†  â‰âŒœËœ coords

		# nonempty pairs of coords
		pairs â† (0âŠ¸â‰ â‰ Â¨)âŠ¸/Ë˜ (â‰¢ËÂ¨)âŠ¸(/Â¨) raw_pairs
		# hacky solve for 50 repeats in a row, instead of doing it smartly
		all_antinodes â†  â¥Š âˆ¾Ë˜ {((-Ë)+âŸğ•©âŠ)Â¨ pairs} â†•50

		WithinBounds â† {ğ•Šantinode:
			maxes â† â‰¤Ë >shapeâ‹ˆ antinode
			mins  â† >Ë >(0â€¿0)â‹ˆ antinode

			Â¬ âŒˆÂ´ maxesâˆ¾mins
		}
		bounded â† (WithinBoundsÂ¨)âŠ¸/ all_antinodes
		bounded
	}

	antennae â† / '.'âŠ¸â‰ âˆ¾lines
	ant_coords â† >âˆ˜linesâŠ¸IdxToRowColÂ¨ antennae

	â‰  â· ant_coordsâˆ¾ âˆ¾FindAntsÂ¨ freqs
}

SolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is wrong! Expected: " âˆ¾ (â€¢Fmt expected )âˆ¾ ", got: "âˆ¾(â€¢Fmt answer))
	err_msg!(expected= answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

AtLeastPartialSolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is too low! Got instead: "âˆ¾(â€¢Fmt answer))
	err_msg!(expected< answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

AtMostPartialSolutionValidator â† {partâ€¿expectedğ•Šanswer:
	err_msg â† ("Part "âˆ¾(â€¢Fmt part)âˆ¾" is too high! Got instead: "âˆ¾(â€¢Fmt answer))
	err_msg!(expected< answer)
	â€¢Show "Correctly solved Part "âˆ¾(â€¢Fmt part)âˆ¾": "âˆ¾(â€¢Fmt answer)
}

# "part 1: " Log PartOne data
# "part 2: " Log PartTwo data

# sample
# 1â€¿14 SolutionValidator PartOne data
# input
1â€¿367 SolutionValidator PartOne data

# sample
# 2â€¿34 SolutionValidator PartTwo data
# input
2â€¿1285 SolutionValidator PartTwo data
