âŸ¨Get, PostâŸ© â† â€¢Import "../external/bqn-curl/curl.bqn"
âŸ¨FromBytesâŸ© â† â€¢Import "../external/bqn-libs/strings.bqn"
âŸ¨Parse, ExportâŸ© â† â€¢Import "../external/bqn-libs/json.bqn"

Pp â† {â€¢Show 100â†‘â€¢Fmtğ•©â‹„ğ•©}
Rr â† { â€¢Show (100âŠ¸â†‘ â€¢Repr ğ•©)â‹„ğ•©}


filename â† "reddit.json"

# âŸ¨contentâŸ© â†Get "https://reddit.com/r/programming.json"
# filename â€¢file.Chars (Export Parse content)

content â†  Parse â€¢file.Bytes filename
listing â†  Parse â€¢file.Bytes filename


KindData â† 1âŠâŠ‘
KindDataChildren â† 1âŠ‘ KindData


Jj â† {â€¢Show (100â†‘ Export ğ•©)â‹„ğ•©}

# use jq to format the json
Jq â† {
	raw_json â† Export ğ•©
	filter â† " | ."
	exitcodeâ€¿stdoutâ€¿stderr â† â€¢SH âŸ¨"jq", "-n", raw_json âˆ¾ filter âŸ©
	â€¢Out 300â†‘ stdout
	ğ•©
}

submissions â† 1â€¿4âŠ‘ 1â€¿1âŠ‘ content
# submissions â† children â† 1âŠ 1âŠ‘ data â† 1âŠ content

# finds the data associated to the field
FindColumn â† {
	column â† ğ•¨
	column ({(ğ•¨âŠ¸â·)âˆ˜âŠğ•©}/1âŠ¸âŠ) ğ•©
}

# Rr submissions

submission â† 1âŠ‘ KindData 0âŠ submissions
# # â€¢Show { ((<"title")âŠ¸FindColumn ) KindDataChildren â€¢Show ğ•© }Ë˜ Rr submissions
# â€¢Show { ((<"title")âŠ¸FindColumn ) â€¢Show ğ•© } 4âŠ‘ submissions
# â€¢Show 0â€¿3âŠ‘ 1âŠ‘  1âŠ>âŠ  children
columns_names â† 0âŠ submission
â€¢Show columns_names
